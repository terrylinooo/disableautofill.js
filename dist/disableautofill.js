(()=>{"use strict";const e={fields:[],asterisk:"‚óè",callback:null};var t=function getState(e){return void 0===window.disableautofillstate[e]&&(window.disableautofillstate[e]={}),window.disableautofillstate[e]},i=function updateState(e,t){window.disableautofillstate[e]=t};function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function Randomizer(e,i){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Randomizer),this.dom=e,this.originalPassChars=i,this.originalNames=t("original_names"),this.temporaryNames=t("temporary_names")}return function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(Randomizer,[{key:"randomize",value:function randomize(){var e=this.dom.id,t=Math.random().toString(36).replace(/[^a-z]+/g,"");this.originalNames[e]||(this.originalNames[e]=this.dom.name),this.temporaryNames[this.originalNames[e]]?this.dom.name=this.temporaryNames[this.originalNames[e]]:(this.dom.name=t,this.temporaryNames[this.originalNames[e]]=t),i("original_names",this.originalNames),i("temporary_names",this.temporaryNames)}},{key:"restore",value:function restore(){this.dom.name=this.originalNames[this.dom.id],this.dom.value=this.originalPassChars.join("")}}]),Randomizer}();const a=function handle(e,a,r,o){var s=t("temporary_pass_value"),l=t("temporary_pass_length"),c=t("original_pass_value"),u=e;u.id||(u.id=Math.random().toString(36).substring(5)),Object.prototype.hasOwnProperty.call(c,u.id)||(c[u.id]=[]);var f=c[u.id],d=u.value;s[u.id]=u.value,l[u.id]=d.length;for(var h=u.selectionStart,m=0;m<d.length;m+=1)d[m]!==r&&(f[m]=d[m]);if(d.length<f.length){var p=f.length-d.length,v=a.keyCode||a.charCode;8===v||46===v?f.splice(h,p):(f.splice(h-1,p+1),f.splice(h-1,0,d[h-1]))}u.value=d.replace(/./g,r);var y=new n(e,f);"randomize"===o?y.randomize():"restore"===o&&y.restore(),i("temporary_pass_value",s),i("temporary_pass_length",l),i("original_pass_value",c)};function event_adapter_defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function EventAdapter(e){!function event_adapter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventAdapter),this.target=e,this.events={}}return function event_adapter_createClass(e,t,i){return t&&event_adapter_defineProperties(e.prototype,t),i&&event_adapter_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(EventAdapter,[{key:"on",value:function on(e,t){this.events[e]=t,this.target.addEventListener(e,this.events[e])}},{key:"off",value:function off(e){this.target.removeEventListener(e,this.events[e])}},{key:"emit",value:function emit(e){void 0!==this.events[e]&&this.target.dispatchEvent(new Event(e))}},{key:"destory",value:function destory(){for(var e=Object.keys(this.events),t=0;t<e.length;t+=1)this.off(e[t]);delete this.events}},{key:"mock",value:function mock(e,t){void 0!==this.events[e]&&this.events[e](t)}}]),EventAdapter}();function main_defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var o=new WeakSet,s=function(){function Main(t,i){!function main_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Main),_classPrivateMethodInitSpec(this,o),this.setting=Object.assign(e,i),this.form=document.querySelector(t),this.form&&"FORM"===this.form.tagName?(this.event=new r(this.form),function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(this,o,_init2).call(this)):console.error("Invalid Form DOM.")}return function main_createClass(e,t,i){return t&&main_defineProperties(e.prototype,t),i&&main_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(Main,[{key:"destory",value:function destory(){this.setting.fields.forEach((function(e){var t=document.querySelector(e);t&&t.getAttribute("data-original-type")&&t.setAttribute("type","password")})),this.form.removeAttribute("autocomplete"),this.event.destory()}}]),Main}();function _init2(){this.setting.fields.forEach((function(e){var t=document.querySelector(e);if(t){var i=t.getAttribute("type");"password"===i&&(t.setAttribute("data-original-type",i),t.setAttribute("type","text"))}})),this.form.setAttribute("autocomplete","off"),function initializeState(){void 0===window.disableautofillstate&&(window.disableautofillstate={})}(),function listen(e){var t=e.form,i=e.event,n=e.setting.fields,r=e.setting.asterisk,o=e.setting.callback;i.on("keyup",(function(e){n.forEach((function(t){var i=document.querySelector(t);i&&(a(i,e,r,"randomize"),i.setAttribute("type","text"))}))})),i.on("submit",(function(e){e.preventDefault(),new Promise((function(t){for(var i=0;i<n.length;i+=1){var o=document.querySelector(n[i]);o&&(a(o,e,r,"restore"),"password"===o.getAttribute("data-original-type")&&o.setAttribute("type","password"))}t()})).then((function(){("function"!=typeof o||o(t))&&t.submit()}))}))}(this)}window.Disableautofill=s})();